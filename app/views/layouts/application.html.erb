<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">

    <link rel="apple-touch-icon" href="/assets/icon.png"/>
    <title><%= content_for?(:title) ? yield(:title) : "Dashboard" %></title>

    <%= csrf_meta_tags %>

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
    <![endif]-->

    <%= stylesheet_link_tag "application", :media => "all" %>

    <!-- For third-generation iPad with high-resolution Retina display: -->
    <!-- Size should be 144 x 144 pixels -->
    <%= favicon_link_tag 'images/apple-touch-icon-144x144-precomposed.png', :rel => 'apple-touch-icon-precomposed', :type => 'image/png', :sizes => '144x144' %>

    <!-- For iPhone with high-resolution Retina display: -->
    <!-- Size should be 114 x 114 pixels -->
    <%= favicon_link_tag 'images/apple-touch-icon-114x114-precomposed.png', :rel => 'apple-touch-icon-precomposed', :type => 'image/png', :sizes => '114x114' %>

    <!-- For first- and second-generation iPad: -->
    <!-- Size should be 72 x 72 pixels -->
    <%= favicon_link_tag 'images/apple-touch-icon-72x72-precomposed.png', :rel => 'apple-touch-icon-precomposed', :type => 'image/png', :sizes => '72x72' %>

    <!-- For non-Retina iPhone, iPod Touch, and Android 2.1+ devices: -->
    <!-- Size should be 57 x 57 pixels -->
    <%= favicon_link_tag 'images/apple-touch-icon-precomposed.png', :rel => 'apple-touch-icon-precomposed', :type => 'image/png' %>

    <!-- For all other devices -->
    <!-- Size should be 32 x 32 pixels -->
    <%= favicon_link_tag 'images/favicon.ico', :rel => 'shortcut icon' %>

    <script>
      function spinner(holderid, R1, R2, count, stroke_width, colour) {
                var sectorsCount = count || 12,
                    color = colour || "#fff",
                    width = stroke_width || 15,
                    r1 = Math.min(R1, R2) || 35,
                    r2 = Math.max(R1, R2) || 60,
                    cx = r2 + width,
                    cy = r2 + width,
                    r = Raphael(holderid, r2 * 2 + width * 2, r2 * 2 + width * 2),
                    
                    sectors = [],
                    opacity = [],
                    beta = 2 * Math.PI / sectorsCount,

                    pathParams = {stroke: color, "stroke-width": width, "stroke-linecap": "round"};
                    Raphael.getColor.reset();
                for (var i = 0; i < sectorsCount; i++) {
                    var alpha = beta * i - Math.PI / 2,
                        cos = Math.cos(alpha),
                        sin = Math.sin(alpha);
                    opacity[i] = 1 / sectorsCount * i;
                    sectors[i] = r.path([["M", cx + r1 * cos, cy + r1 * sin], ["L", cx + r2 * cos, cy + r2 * sin]]).attr(pathParams);
                    if (color == "rainbow") {
                        sectors[i].attr("stroke", Raphael.getColor());
                    }
                }
                var tick;
                (function ticker() {
                    opacity.unshift(opacity.pop());
                    for (var i = 0; i < sectorsCount; i++) {
                        sectors[i].attr("opacity", opacity[i]);
                    }
                    r.safari();
                    tick = setTimeout(ticker, 1000 / sectorsCount);
                })();
                return function () {
                    clearTimeout(tick);
                    r.remove();
                };
            }
    </script>
  </head>
  <body data-target=".subnav">
<div id="holder"></div>
<div id="holder2"></div>
<div id="holder3"></div>
<div id="holder4"></div>
<div id="holder5"></div>
<div id="holder6"></div>
<div id="holder7"></div>
    <div class="navbar">
      <div class="navbar-inner">
        <div class="container">
          <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <span class="brand" href="#"><%= params[:application_name] %></span>
          <span class="dashboard-brand brand" href="#">Dashboard</span>
          <did class="nav-collapse collapse">
            <ul class="nav">
              <li class="<%= 'active' if params[:action] == 'index' %>">
                <%= link_to url_for(:controller => 'dashboard', :action => 'index') do %>
                  <span id="nav-dashboard-image"></span>
                  <span>Dashboard</span>
                <% end %>
              </li>
              <li class="<%= 'active' if params[:action] == 'stories' %>">
                <%= link_to url_for(:controller => 'dashboard', :action => 'stories') do %>
                  <span id="nav-stories-image"></span>
                  <span>Stories</span>
                <% end %>
              </li>
              <li class="<%= 'active' if params[:action] == 'builds' %>">
                <%= link_to url_for(:controller => 'dashboard', :action => 'builds') do %>
                  <span id="nav-builds-image"></span>
                  <span>Builds</span>
                <% end %>
              </li>
              <li class="<%= 'active' if params[:action] == 'performance' %>">
                <%= link_to url_for(:controller => 'dashboard', :action => 'performance') do %>
                  <span id="nav-performance-image"></span>
                  <span>Performance</span>
                <% end %>
              </li>
              <li class="<%= 'active' if params[:action] == 'source' %>">
                <%= link_to url_for(:controller => 'dashboard', :action => 'source') do %>
                  <span id="nav-source-image"></span>
                  <span>Source</span>
                <% end %>
              </li>
              <li class="<%= 'active' if params[:action] == 'configure' %>">
                <%= link_to url_for(:controller => 'dashboard', :action => 'configure') do %>
                  <span id="nav-configure-image"></span>
                  <span>Configure</span>
                <% end %>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <% flash.each do |name, msg| %>
        <div class="alert alert-<%= name == :notice ? "success" : "error" %>">
          <a class="close" data-dismiss="alert">Ã—</a>
          <%= msg %>
        </div>
      <% end %>
      <div class="row-fluid">

        <div id="dashboard-contents" class="span12">
        
          <%= yield %>
        </div>
      </div><!--/row-->

      <footer>
        <p>&copy; Company 2012 - Version <%= application_version_html %></p>
      </footer>

    </div> <!-- /container -->

    <!-- Javascripts
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <%= javascript_include_tag "application" %>

    <script>
      // spinner('holder', 80, 100, 30, 8, '#fff');
      // spinner('holder2', 80, 100, 30, 8, '#fff');
      // spinner('holder3', 80, 100, 30, 8, '#fff');
      // spinner('holder4', 80, 100, 30, 8, '#fff');
      // spinner('holder5', 80, 100, 30, 8, '#fff');
      // spinner('holder6', 80, 100, 30, 8, '#fff');
      // spinner('holder2', 80, 80, 100, 8, '#fff');
      // spinner('holder3', 80, 80, 100, 8, '#fff');
      // spinner('holder4', 80, 80, 100, 8, '#fff');
      // spinner('holder5', 80, 80, 100, 8, '#fff');
      // spinner('holder6', 80, 80, 100, 8, '#fff');
      // spinner('holder7', 80, 80, 100, 8, '#fff');
    </script>
  </body>
</html>
